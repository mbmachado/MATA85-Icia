var re=Object.defineProperty,oe=Object.defineProperties;var le=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var ce=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var H=(t,a,s)=>a in t?re(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,U=(t,a)=>{for(var s in a||(a={}))ce.call(a,s)&&H(t,s,a[s]);if(z)for(var s of z(a))ie.call(a,s)&&H(t,s,a[s]);return t},$=(t,a)=>oe(t,le(a));import{r as c,R as e,a as me,u as A,F,I as O,O as P,b as X,c as N,V as de,d as ue,L as G,B as T,H as pe,e as Ee,f as he,P as ge,T as L,S as fe,g as ve,h as xe,i as be,j as ye,k as D,t as I,A as j,l as Ce,M as Ne,m as we,D as Se,E as J,n as Y,o as ke,p as Te,q as Ae,s as Ie,v as Fe,w as V,x as M,y as Oe,z as Pe,C as qe,G as b,N as R,J as Me,K as De,Q as Ue}from"./vendor.19b3178b.js";const $e=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}};$e();const Z=c.exports.createContext({}),Re=({children:t})=>{const[a,s]=c.exports.useState(),[o,n]=c.exports.useState(""),r=E=>{s(E)},l=E=>{n(E)},p=()=>{n(""),s(void 0)};return e.createElement(Z.Provider,{value:{user:a,authToken:o,storeUser:r,storeToken:l,clean:p}},t)},q=()=>e.useContext(Z);const Be={Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:"Bearer "},C=me.create({baseURL:"http://virtual-assistent-backend.herokuapp.com/",headers:Be}),w={login:async(t,a)=>C.post("/api/v2/auth/login",{email:t,password:a}),getTopicsTree:async t=>{var s;let a=t;return a||(a=((s=k())==null?void 0:s.token)||""),C.get("/api/v3/topics",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},createQuestion:async(t,a,s,o)=>{var l;let n=t;n||(n=((l=k())==null?void 0:l.token)||"");const r={topic_id:a,description:s,answer:o};return C.post("/api/v3/questions",r,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${n}`}})},getInitialTopicsTree:async()=>C.get("/api/v1/topics"),getTopicsTreeById:async t=>C.get(`/api/v1/topics/${t}`),getTopicsTreeByNlp:async t=>C.get("/api/v3/nlp",{params:{text:t}}),getQuestions:async t=>{var s;let a=t;return a||(a=((s=k())==null?void 0:s.token)||""),C.get("/api/v3/questions",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},editQuestion:async(t,a,s,o,n)=>{var p;let r=a;r||(r=((p=k())==null?void 0:p.token)||"");const l={id:t,topic_id:s,description:o,answer:n};return C.patch(`/api/v3/questions/${t}`,l,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${r}`}})},deleteQuestion:async(t,a)=>{var o;let s=a;return s||(s=((o=k())==null?void 0:o.token)||""),C.delete(`/api/v3/questions/${t}`,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${s}`}})},getUsers:async()=>{var a;const t={headers:{Authorization:"Bearer "+((a=k())==null?void 0:a.token)}};return C.get("/api/v3/users",t)},createUser:async(t,a,s)=>{var n;const o={headers:{Authorization:"Bearer "+((n=k())==null?void 0:n.token)}};return C.post("/api/v3/users",{email:t,name:a,password:s},o)},editUser:async(t,a,s,o)=>{var r;const n={headers:{Authorization:"Bearer "+((r=k())==null?void 0:r.token)}};return C.patch(`/api/v3/users/${t}`,{email:a,name:s,password:o},n)},deleteUser:async t=>{var s;const a={headers:{Authorization:"Bearer "+((s=k())==null?void 0:s.token)}};return C.delete(`/api/v3/users/${t}`,a)}},Le=t=>{window.sessionStorage.setItem("AUTH",JSON.stringify(t))},k=()=>{const t=window.sessionStorage.getItem("AUTH");return t?JSON.parse(t):null},je=()=>{window.sessionStorage.removeItem("AUTH")};var Qe="/assets/logo-icia-vertical.dc3a2a24.svg";function Q({children:t}){return e.createElement("div",{className:`auth-container d-flex flex-column overflow-auto justify-content-start\r
                 justify-content-sm-center align-items-center p-3 p-md-4 min-vh-100 w-100`},e.createElement("div",{className:"shadow-sm rounded bg-white w-100 p-3"},e.createElement("div",{className:"px-3 pt-3 pb-4"},e.createElement("a",{className:"logo d-block mx-auto mb-3"},e.createElement("img",{src:Qe,alt:"Logomarca ICIA",className:"w-100"})),t)),e.createElement("div",{className:"w-100 mt-2 text-center text-white"},"\xA9 Todos os direitos reservados."))}function ze(){const t=A(),[a,s]=e.useState({email:"",password:"",showPassword:!1}),{storeUser:o,storeToken:n}=q(),r=m=>d=>{s($(U({},a),{[m]:d.target.value}))},l=()=>{s($(U({},a),{showPassword:!a.showPassword}))},p=m=>{m.preventDefault()},E=m=>{m.preventDefault(),w.login(a.email,a.password).then(d=>d.data).then(d=>{var i,x;if(d.status==="Success"){const f=(i=d.data)==null?void 0:i.user;o(f),n((x=d.data)==null?void 0:x.token),Le(d.data),t("/dashboard")}}).catch(d=>{console.log(d),s($(U({},a),{password:""}))})};return e.createElement(Q,null,e.createElement("p",{className:"text-center mb-3"},"Fa\xE7a login com e-mail e senha para acessar o painel administrativo do Assistente Virtual do ",e.createElement("span",{className:"text-primary font-weight-bold"},"IC-UFBA"),"."),e.createElement("form",{onSubmit:E,action:"#"},e.createElement(F,{variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(O,{htmlFor:"email"},"E-mail"),e.createElement(P,{id:"email",type:"email",value:a.email,onChange:r("email"),label:"E-mail"})),e.createElement(F,{variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(O,{htmlFor:"password"},"Senha"),e.createElement(P,{id:"password",type:a.showPassword?"text":"password",value:a.password,onChange:r("password"),endAdornment:e.createElement(X,{position:"end"},e.createElement(N,{"aria-label":"toggle password visibility",onClick:l,onMouseDown:p,edge:"end"},a.showPassword?e.createElement(de,null):e.createElement(ue,null))),label:"Senha"})),e.createElement("div",{className:"d-flex mb-3 justify-content-end"},e.createElement(G,{to:"/request-password",id:"request-password__button"},"Esqueceu sua senha?")),e.createElement(T,{id:"submitt-button",type:"submit",variant:"contained",className:"mb-3",disableElevation:!0,fullWidth:!0},"Entrar")))}function He(){return e.createElement(Q,null,e.createElement("p",null,"request-password works!"))}function Ve(){return e.createElement(Q,null,e.createElement("p",null,"request-password works!"))}function _e({handleSidebarOptionClick:t}){return e.createElement("aside",{className:"d-none d-sm-flex flex-column align-items-center border-right border-info h-100"},e.createElement(N,{"aria-label":"home",onClick:()=>t("home")},e.createElement(pe,null)),e.createElement(N,{"aria-label":"brightness4",onClick:()=>t("dark")},e.createElement(Ee,null)),e.createElement(N,{"aria-label":"cached",onClick:()=>t("font")},e.createElement(he,null)))}function We(){const[t,a]=c.exports.useState(null),s=l=>{a(l.currentTarget)},o=()=>{a(null)},n=Boolean(t),r=n?"learn-more-popover":void 0;return e.createElement(e.Fragment,null,e.createElement("h2",{className:"mb-0 text-dark"},"ChatBot do IC-UFBA"),e.createElement("div",{className:"flex-fill"}),e.createElement(T,{"aria-describedby":r,variant:"outlined",color:"secondary",onClick:s},"Saiba mais"),e.createElement(ge,{id:r,open:n,anchorEl:t,onClose:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e.createElement(L,{sx:{p:2}},'O ICIA \xE9 um sistema de "BOT" com o objetivo de responder as d\xFAvidas relacionadas ao Instituto de Computa\xE7\xE3o (IC) da UFBA, especialmente dos cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o do PGCOMP.',e.createElement("br",null),e.createElement("br",null),"O aplicativo foi desenvolvido por discentes de cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o vinculados ao PGCOMP, sob a orienta\xE7\xE3o do Prof. Dr. Frederico Dur\xE3o, referente a disciplina T\xF3picos em Sistemas de Informa\xE7\xE3o e Web I no semestre letivo de 2022.1.")))}function Ke({generateMessegesOnFormSubmit:t}){const[a,s]=e.useState(""),o=()=>r=>{r.preventDefault(),t(a),s("")},n=()=>r=>{s(r.target.value)};return e.createElement("div",{className:"chat-input-container rounded-pill border border-info position-relative overflow-hidden w-100"},e.createElement("form",{onSubmit:o()},e.createElement("input",{type:"text",className:"py-2 pl-4 pr-5 w-100 border-0",onChange:n(),placeholder:"Digite algo",value:a}),e.createElement("div",{className:"position-absolute"},e.createElement(N,{type:"submit","aria-label":"cached",disabled:!a.length},e.createElement(fe,null)))))}var Xe="/assets/icon-icia.06ab72ef.svg";function _({items:t,handleItemSelection:a}){const[s,o]=c.exports.useState(),n=l=>{o(l.id),a(l)},r=l=>l.description!==void 0;return e.createElement(e.Fragment,null,t!=null&&t.length?e.createElement("div",{className:"chat-items"},t.map(l=>e.createElement("button",{type:"button",key:l.id,onClick:()=>n(l),title:r(l)?l.description:l.name,className:`chat-item-option d-block rounded-pill bg-info text-dark py-${r(l)?"1":"2"} px-3 mt-3 border-0${s===l.id?" selected":""}`},e.createElement("span",null,r(l)?l.description:l.name)))):null)}function W({children:t,questions:a,side:s,text:o,topics:n,generateMessegesForTopicSelection:r,generateMessegesForQuestionSelection:l}){const p=d=>{typeof r=="function"&&E(d)&&r(d),typeof l=="function"&&m(d)&&l(d)},E=d=>d.name!==void 0,m=d=>d.description!==void 0;return e.createElement("div",{className:`chat-message d-flex ${s} w-100`},e.createElement("div",{className:"chat-user rounded-circle align-self-end d-flex align-items-center justify-content-center"},s==="left"?e.createElement("img",{src:Xe,className:"h-auto",alt:"assistente chatbot"}):e.createElement(ve,null,"person")),e.createElement("div",{className:"chat-ballon py-3 px-4"},o!=null&&o.length?e.createElement("h3",{className:"mb-0"},o.includes("https://")?e.createElement("a",{target:"_blank",className:"text-white",href:o,rel:"noreferrer"},o):o):null,t,e.createElement(_,{items:n,handleItemSelection:p}),a!=null&&a.length?e.createElement("div",{className:"d-block w-100"},e.createElement("h4",{className:"text-white mt-3 mb-0"},"Quest\xF5es:"),e.createElement(_,{items:a,handleItemSelection:p})):null,e.createElement("div",null)))}function Ge(){return e.createElement("div",{className:"d-flex align-items-center typing"},e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}))}var Je="/assets/logo-icia-horizontal-text-white.dc2df070.svg";function ee({children:t}){return e.createElement("div",null,e.createElement("header",{className:"d-flex align-items-center justify-content-start w-100 app-header px-3"},e.createElement("img",{"data-testid":"logo",src:Je,className:"app-logo",alt:"logo"}),e.createElement("div",{className:"flex-fill"}),t))}function Ye(){const t=c.exports.useRef(null),[a,s]=c.exports.useState(0),[o,n]=c.exports.useState([]),[r,l]=c.exports.useState(!0),p=A(),E=["Agora escolha uma op\xE7\xE3o :)","Escolha mais uma op\xE7\xE3o abaixo.","Quase l\xE1, selecione uma op\xE7\xE3o.","Veja algumas op\xE7\xF5es que encontrei :)"];c.exports.useEffect(()=>{w.getInitialTopicsTree().then(h=>{const g=S(h.data);l(!1),n([...o,{text:a===0?"Ol\xE1, eu sou a Icia. Como posso te ajudar hoje?":"Ok... vamos tentar de novo. Como posso te ajudar hoje?",side:"left",topics:g}])}),a===0&&m()},[a]);const m=()=>{t&&t.current.addEventListener("DOMNodeInserted",h=>{const g=h.currentTarget;g.scroll({top:g.scrollHeight,behavior:"smooth"})})},d=h=>{h==="home"?s(1+a):alert("N\xE3o implementado!")},i=async h=>{const g=[...o,{text:h.name,side:"right"}];n(g),l(!0);const v=(await w.getTopicsTreeById(h.id)).data.find(Boolean),y=S(v.children),se=v.questions;g.push({text:E[Math.floor(Math.random()*E.length)],side:"left",topics:y,questions:se}),l(!1),n(g)},x=async h=>{const g=[...o,{text:h.description,side:"right"},{text:h.answer,side:"left"}];n(g)},f=async h=>{const g=[];g.push({text:h,side:"right"}),g.push({text:"Ohh, n\xE3o... N\xE3o encontrei uma resposta para a sua pergunta.         Tente pesquisar com outro termo ou utilizar as op\xE7\xF5es do menu :(",side:"left"}),n([...o,...g])},S=h=>h.filter(u=>!!u.name.length).map(u=>({id:u.id,name:u.name}));return e.createElement("div",{className:"chatbot d-block w-100"},e.createElement("div",{className:"d-block min-vh-100 vh-100 w-100 mx-auto"},e.createElement(ee,null,e.createElement(T,{id:"login-button",type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{p("/login",{replace:!0})}},"Login")),e.createElement("div",{className:"chat-container d-flex"},e.createElement(_e,{handleSidebarOptionClick:d}),e.createElement("main",{className:"d-flex flex-column flex-fill"},e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-bottom border-info px-3"},e.createElement(We,null)),e.createElement("div",{ref:t,className:"chat-content d-flex flex-column flex-fill w-100 mw-100 p-3"},o.map((h,g)=>e.createElement(W,{key:g,text:h.text,side:h.side,topics:h.topics,questions:h.questions,generateMessegesForTopicSelection:i,generateMessegesForQuestionSelection:x})),r?e.createElement(W,{side:"left"},e.createElement(Ge,null)):null),e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-top border-info px-3"},e.createElement(Ke,{generateMessegesOnFormSubmit:f}))))))}const te=xe({palette:{primary:{light:"#72C3E6",main:"#72C3E6",dark:"#72C3E6",contrastText:"#FFF"},secondary:{light:"#F9D055",main:"#F9D055",dark:"#F9D055",contrastText:"#FFF"}},typography:{fontFamily:["IBM Plex Sans","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),Ze=[{id:"question-link",icon:t=>e.createElement(be,{htmlColor:t}),name:"Perguntas",path:"/dashboard/questions",isSelected:!1},{id:"users-link",icon:t=>e.createElement(ye,{htmlColor:t}),name:"Usu\xE1rios",path:"/dashboard/users",isSelected:!1}],et=()=>e.createElement("nav",{id:"container"},Ze.map(t=>{const a=window.location.pathname.includes(t.path);return e.createElement(G,{"data-testid":t.id,to:t.path,key:t.id},e.createElement("div",{className:"menu-option"},e.createElement("i",{className:"menu-icon"},t.icon(a?te.palette.secondary.main:"")),e.createElement("span",{className:a?"is-selected":""},t.name)))}));function B({children:t}){const{clean:a,user:s}=q(),o=A(),n=D().pathname,r=D().state,l=r==null?void 0:r.message;return c.exports.useEffect(()=>{l&&(I[l.type](l.text),history.replaceState({message:null},""))},[]),e.createElement("div",{className:"app"},e.createElement(ee,null,e.createElement("button",{id:"logout-button",onClick:()=>{je(),a(),o("/login",{replace:!0})}},n==="/"?"ACESSO ADMIN":"SAIR")),e.createElement("div",{id:"admin-container"},e.createElement(et,null),e.createElement("main",{id:"admin-content"},t)))}const ae=({description:t,answer:a,isEdit:s,handleSubmit:o,handleQuestionChange:n,handleAnswerChange:r})=>e.createElement("form",{onSubmit:o,className:"formContainer"},e.createElement(F,{className:"mt-4",variant:"outlined",fullWidth:!0,color:"secondary"},e.createElement(O,{htmlFor:"input-question"},"Pergunta"),e.createElement(P,{id:"input-question",type:"text",placeholder:"Digite a pergunta",value:t,onChange:l=>n(l.target.value),label:"Pergunta"})),e.createElement("div",{className:" mb-2"},e.createElement(F,{className:"mt-4",variant:"outlined",color:"secondary",fullWidth:!0},e.createElement(O,{htmlFor:"input-answer"},"Resposta"),e.createElement(P,{id:"input-answer",type:"text",placeholder:"Digite a resposta",value:a,onChange:l=>r(l.target.value),label:"Resposta"}))),s?e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"EDITAR"):e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"CADASTRAR")),tt=()=>{const t=A(),[a,s]=c.exports.useState(""),[o,n]=c.exports.useState(""),{authToken:r}=q(),{topicId:l,topicName:p}=D().state,E=i=>{n(i)},m=i=>{s(i)},d=i=>{i.preventDefault(),w.createQuestion(r,l,a,o).then(x=>x.data).then(x=>{console.log(x),t("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta adicionada com sucesso!"}}})}).catch(x=>{})};return e.createElement(B,null,e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(N,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{t(-1)}},e.createElement(j,null)),e.createElement("span",{className:"title"},"Cadastrar Pergunta em ",p)),e.createElement(ae,{description:a,answer:o,handleSubmit:d,handleAnswerChange:E,handleQuestionChange:m}))},at=()=>{const{id:t,topic_id:a,topicName:s,description:o,answer:n}=D().state,r=A(),[l,p]=c.exports.useState(o),[E,m]=c.exports.useState(n),{authToken:d}=q(),[i,x]=c.exports.useState(!1),{pathname:f}=D(),S=f.includes("edit"),h=v=>{m(v)},g=v=>{p(v)},u=v=>{v.preventDefault(),x(!0),w.editQuestion(t,d,a,l,E).then(y=>y.data).then(y=>{x(!1),r("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta editada com sucesso!"}}})}).catch(y=>{I.error("Ocorreu um erro"),x(!1)})};return e.createElement(B,null,i&&e.createElement(Ce,{variant:"indeterminate"}),e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(N,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{r(-1)}},e.createElement(j,null)),e.createElement("span",{className:"title"},"Editar Pergunta",s)),e.createElement(ae,{description:l,answer:E,handleSubmit:u,handleAnswerChange:h,handleQuestionChange:g,isEdit:S}))};function ne({title:t,text:a,isOpen:s,handleClose:o,handleConfirm:n}){return c.exports.createElement("div",null,c.exports.createElement(Ne,{open:s,onClose:o,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},c.exports.createElement(we,{className:"modal-box"},c.exports.createElement(L,{id:"modal-modal-title",variant:"h6",component:"h2"},t),c.exports.createElement(L,{id:"modal-modal-description",sx:{mt:2}},a),c.exports.createElement("div",{className:"modal-footer"},c.exports.createElement(T,{variant:"contained",color:"warning",onClick:n,"data-testid":"confirm-button"},"Sim"),c.exports.createElement(T,{variant:"outlined",onClick:o,className:"ml-2"},"N\xE3o")))))}function nt({questions:t,removeQuestion:a}){const s=A(),{authToken:o}=q(),[n,r]=e.useState(!1),[l,p]=e.useState(),E=f=>{const{id:S,topic_id:h,description:g,answer:u,parents:v}=f;let y=h;!y&&v&&(y=v[v.length-1].id),s("edit",{state:{id:S,topic_id:y,description:g,answer:u}})},m=f=>{w.deleteQuestion(f,o).then(S=>{S.data.status==="Success"?(a&&a(f),I.success("Pergunta exclu\xEDda com sucesso!")):I.error("Houve um erro ao excluir a pergunta."),i()})},d=f=>{p(f),r(!0)},i=()=>{p(void 0),r(!1)},x=[{field:"description",headerName:"Pergunta",flex:4},{field:"answer",headerName:"Resposta",flex:4},{field:"id",headerName:"A\xE7\xF5es",renderCell:f=>e.createElement(e.Fragment,null,e.createElement(ne,{title:"Excluir Pergunta",text:"Tem certeza que deseja excluir essa pergunta?",isOpen:n&&l===f.row.id,handleClose:i,handleConfirm:()=>m(l)}),e.createElement(N,{"aria-label":"Editar","data-testid":"edit-button",component:"span",onClick:()=>E(f.row)},e.createElement(J,null)),e.createElement(N,{"data-testid":"delete-button","aria-label":"Deletar",component:"span",onClick:()=>{d(f.row.id)}},e.createElement(Y,null)))}];return e.createElement("div",{style:{height:"80vh",width:"100%"}},e.createElement(Se,{rows:t,columns:x,pageSize:15,rowsPerPageOptions:[],disableSelectionOnClick:!0}))}function st(){const[t,a]=c.exports.useState([]),[s,o]=c.exports.useState([]),[n,r]=c.exports.useState([]),[l,p]=c.exports.useState([]),[E,m]=c.exports.useState(""),[d,i]=c.exports.useState(0),x=A(),{authToken:f}=q(),{getTopicsTree:S,getQuestions:h}=w,g=u=>{a(v=>v.filter(y=>y.id!==u))};return c.exports.useEffect(()=>{d===0&&h(f).then(u=>{a(u.data)})},[d]),c.exports.useEffect(()=>{S(f).then(u=>{p(u.data||[]),r(u.data||[])})},[]),e.createElement(B,null,e.createElement("div",{className:"title-container"},e.createElement("h2",{className:"title"},"Perguntas por categoria")),e.createElement("div",{className:"questions-container"},e.createElement("div",{className:"breadcrumb-container"},d!==0?e.createElement("span",null,e.createElement("button",{className:"breadcrumb-item",onClick:()=>{o([]),p(n),m(""),i(0),a([])}},"Inicio")," > "):e.createElement("span",null,"Inicio"),s.map((u,v)=>v!==s.length-1?e.createElement("span",{key:u.id},e.createElement("button",{className:"breadcrumb-item",onClick:()=>{o(y=>y.slice(0,v+1)),p(u.children),m(u.name),i(u.id),a(u.questions)}},u.name)," > "):e.createElement(e.Fragment,null,u.name))),l.map(u=>u.name===""?null:e.createElement("button",{key:u.id,className:"filter-question-button",onClick:()=>{a(u.questions),o(v=>[...v,u]),p(u.children),m(u.name),i(u.id)}},u.name)),e.createElement("div",{className:"mt-3"},E&&e.createElement(e.Fragment,null,e.createElement("h3",null," ",`Perguntas categoria ${E}`),e.createElement("br",null),e.createElement("div",null,e.createElement(T,{variant:"contained","data-testid":"add-question-button",onClick:()=>{x("/dashboard/questions/create",{state:{topicId:d,topicName:E}})}},"ADICIONAR")))),e.createElement("div",{id:"questions-container"},e.createElement(nt,{questions:t,removeQuestion:g}))))}function K(){const t=A(),{id:a,name:s,email:o}=D().state,[n,r]=e.useState({email:o||"",name:s||"",password:""}),l=E=>m=>{r($(U({},n),{[E]:m.target.value}))},p=E=>{E.preventDefault(),a?w.editUser(a,n.email,n.name,n.password).then(m=>m.data).then(m=>{console.log(m),t("/dashboard/users",{state:{message:{type:"success",text:"Usu\xE1rio editado com sucesso!"}}})}).catch(m=>{I.error("Houve um erro ao editar usu\xE1rio."),console.log(m)}):w.createUser(n.email,n.name,n.password).then(m=>m.data).then(m=>{console.log(m),t("/dashboard/users",{state:{message:{type:"success",text:"Usu\xE1rio criado com sucesso!"}}})}).catch(m=>{I.error("Houve um erro ao criar usu\xE1rio."),console.log(m)})};return e.createElement(B,null,e.createElement("div",{className:"user-container title-container"},e.createElement(N,{"aria-label":"Voltar",component:"span",onClick:()=>{t("/dashboard/users")}},e.createElement(j,null)),e.createElement("h2",null,a?"Editar Usu\xE1rio":"Cadastrar Usu\xE1rio")),e.createElement("div",{className:"user-container"},e.createElement("form",{onSubmit:p,action:"#"},e.createElement(F,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(O,{htmlFor:"text"},"Nome"),e.createElement(P,{id:"name",type:"text",value:n.name,onChange:l("name"),label:"Nome"})),e.createElement(F,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(O,{htmlFor:"text"},"E-mail"),e.createElement(P,{id:"email",type:"email",value:n.email,onChange:l("email"),label:"E-mail"})),e.createElement(F,{variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(O,{color:"secondary",htmlFor:"text"},"Senha"),e.createElement(P,{id:"password",type:"text",value:n.password,onChange:l("password"),label:"Senha",color:"secondary"})),e.createElement(T,{type:"submit","data-testid":"submit-button",variant:"contained",color:"secondary",disableElevation:!0},"Enviar"))))}function rt(){const t=A(),[a,s]=c.exports.useState([]),[o,n]=c.exports.useState(!1),[r,l]=c.exports.useState(),p=i=>{w.deleteUser(i).then(()=>{I.success("Usu\xE1rio exclu\xEDdo com sucesso!"),d()}).catch(x=>{I.error("Houve um erro ao excluir o usu\xE1rio")})},E=i=>{l(i),n(!0)},m=()=>{l(void 0),n(!1)},d=()=>{w.getUsers().then(i=>{s(i.data)})};return c.exports.useEffect(()=>{d()},[]),e.createElement(B,null,e.createElement("div",{className:"user-container title-container"},e.createElement("h2",null,"Usu\xE1rios Cadastrados"),e.createElement(T,{"data-testid":"add_user-button",variant:"outlined",color:"secondary",onClick:()=>{t("/dashboard/users/create",{state:{id:"",name:"",email:""}})}},"CRIAR NOVO")),e.createElement("div",{className:"user-container",style:{display:"none"}},e.createElement(ke,{id:"search",label:"Pesquisar",InputProps:{startAdornment:e.createElement(X,{position:"start"},e.createElement(Te,null))},variant:"standard"})),e.createElement("div",{className:"user-container"},e.createElement(Ae,null,e.createElement(Ie,{sx:{minWidth:450},size:"small"},e.createElement(Fe,null,e.createElement(V,null,e.createElement(M,null,"Nome"),e.createElement(M,null,"Email"),e.createElement(M,{align:"center"},"A\xE7\xF5es"))),e.createElement(Oe,null,a.map(i=>e.createElement(V,{key:i.id,sx:{"&:last-child td, &:last-child th":{border:0}}},e.createElement(M,{width:"40%","data-testid":"user-name"},i.name),e.createElement(M,{width:"40%"},i.email),e.createElement(M,{width:"20%",align:"center"},e.createElement(N,{"aria-label":"Editar","data-testid":"edit_user-button",component:"span",onClick:()=>{t("/dashboard/users/edit",{state:{id:i.id,name:i.name,email:i.email}})}},e.createElement(J,null)),e.createElement(N,{"data-testid":"delete_user-button","aria-label":"Deletar",component:"span",onClick:()=>E(i.id)},e.createElement(Y,null)),e.createElement(ne,{title:"Excluir usu\xE1rio",text:`Tem certeza que deseja excluir o usu\xE1rio ${i.name}?`,isOpen:o&&r==i.id,handleClose:()=>m(),handleConfirm:()=>p(i.id)})))))))))}function ot(){const{user:t,storeToken:a,storeUser:s}=q(),o=c.exports.useMemo(()=>{let n=!!t;if(!t){const r=k();r&&(n=!0,s(r.user),a((r==null?void 0:r.token)||""))}return n},[t]);return e.createElement(Pe,null,e.createElement(qe,null,o?e.createElement(e.Fragment,null,e.createElement(b,{path:"/dashboard",element:e.createElement(R,{to:"/dashboard/questions"})}),e.createElement(b,{path:"/dashboard/users",element:e.createElement(rt,null)}),e.createElement(b,{path:"/dashboard/users/create",element:e.createElement(K,null)}),e.createElement(b,{path:"/dashboard/users/edit",element:e.createElement(K,null)}),e.createElement(b,{path:"/dashboard/questions",element:e.createElement(st,null)}),e.createElement(b,{path:"/dashboard/questions/create",element:e.createElement(tt,null)}),e.createElement(b,{path:"/dashboard/questions/edit",element:e.createElement(at,null)}),e.createElement(b,{path:"questions",element:e.createElement(R,{to:"/dashboard/questions"})}),e.createElement(b,{path:"users",element:e.createElement(R,{to:"/dashboard/users"})}),e.createElement(b,{path:"dashboard",element:e.createElement(R,{to:"/dashboard/questions"})})):e.createElement(e.Fragment,null,e.createElement(b,{path:"login",element:e.createElement(ze,null)}),e.createElement(b,{path:"request-password",element:e.createElement(He,null)}),e.createElement(b,{path:"reset-password",element:e.createElement(Ve,null)})),e.createElement(b,{path:"/",element:e.createElement(Ye,null)}),e.createElement(b,{path:"*",element:e.createElement(R,{to:o?"/dashboard":"/",replace:!0})})))}function lt(){return e.createElement(e.Fragment,null,e.createElement(Re,null,e.createElement(Me,{theme:te},e.createElement(De,null),e.createElement(ot,null))))}Ue.render(e.createElement(e.StrictMode,null,e.createElement(lt,null)),document.getElementById("root"));
