var de=Object.defineProperty,ue=Object.defineProperties;var pe=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var Ee=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var _=(t,a,s)=>a in t?de(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,q=(t,a)=>{for(var s in a||(a={}))Ee.call(a,s)&&_(t,s,a[s]);if(V)for(var s of V(a))he.call(a,s)&&_(t,s,a[s]);return t},U=(t,a)=>ue(t,pe(a));import{r as d,R as e,a as ge,L,u as A,A as Z,F as I,I as F,O,b as j,c as ee,d as w,V as fe,e as ve,f as te,M as K,H as xe,B as be,g as ye,h as T,P as Ce,T as Q,S as Ne,i as Se,j as we,k as ke,l as Te,m as $,t as M,n as z,o as Ae,p as Ie,q as Fe,D as Oe,E as ae,s as ne,v as Me,w as Pe,x as qe,y as Ue,z as De,C as X,G as D,J as Re,K as $e,N as Be,Q as b,U as R,W as Le,X as je,Y as Qe}from"./vendor.e9f38450.js";const ze=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerpolicy&&(o.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?o.credentials="include":n.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}};ze();const se=d.exports.createContext({}),He=({children:t})=>{const[a,s]=d.exports.useState(),[r,n]=d.exports.useState(""),o=h=>{s(h)},l=h=>{n(h)},i=()=>{n(""),s(void 0)};return e.createElement(se.Provider,{value:{user:a,authToken:r,storeUser:o,storeToken:l,clean:i}},t)},P=()=>e.useContext(se);const We={Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:"Bearer "},C=ge.create({baseURL:"https://virtual-assistent-backend.herokuapp.com/",headers:We}),N={getInitialTopicsTree:async()=>C.get("/api/v1/topics"),getTopicsTreeById:async t=>C.get(`/api/v1/topics/${t}`),getTopicsTreeByNlp:async t=>C.post("/api/v1/nlp",{text:t}),login:async t=>C.post("/api/v2/auth/login",t),requestPassword:async t=>C.get(`/api/v2/auth/recoverAccess/${t}`),getTopicsTree:async t=>{var s;let a=t;return a||(a=((s=k())==null?void 0:s.token)||""),C.get("/api/v3/topics",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},createQuestion:async(t,a,s,r)=>{var l;let n=t;n||(n=((l=k())==null?void 0:l.token)||"");const o={topic_id:a,description:s,answer:r};return C.post("/api/v3/questions",o,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${n}`}})},getQuestions:async t=>{var s;let a=t;return a||(a=((s=k())==null?void 0:s.token)||""),C.get("/api/v3/questions",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},editQuestion:async(t,a,s,r,n)=>{var i;let o=a;o||(o=((i=k())==null?void 0:i.token)||"");const l={id:t,topic_id:s,description:r,answer:n};return C.patch(`/api/v3/questions/${t}`,l,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${o}`}})},deleteQuestion:async(t,a)=>{var r;let s=a;return s||(s=((r=k())==null?void 0:r.token)||""),C.delete(`/api/v3/questions/${t}`,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${s}`}})},getUsers:async()=>{var a;const t={headers:{Authorization:"Bearer "+((a=k())==null?void 0:a.token)}};return C.get("/api/v3/users",t)},createUser:async(t,a,s)=>{var n;const r={headers:{Authorization:"Bearer "+((n=k())==null?void 0:n.token)}};return C.post("/api/v3/users",{email:t,name:a,password:s},r)},editUser:async(t,a,s,r)=>{var o;const n={headers:{Authorization:"Bearer "+((o=k())==null?void 0:o.token)}};return C.patch(`/api/v3/users/${t}`,{email:a,name:s,password:r},n)},deleteUser:async t=>{var s;const a={headers:{Authorization:"Bearer "+((s=k())==null?void 0:s.token)}};return C.delete(`/api/v3/users/${t}`,a)}},Ve=t=>{window.sessionStorage.setItem("AUTH",JSON.stringify(t))},k=()=>{const t=window.sessionStorage.getItem("AUTH");return t?JSON.parse(t):null},_e=()=>{window.sessionStorage.removeItem("AUTH")};var Ke="/assets/logo-ic-ufba.d4b7fcf3.png",Xe="/assets/logo-icia-vertical.dc3a2a24.svg";function H({children:t}){return e.createElement("div",{className:`auth-container d-flex flex-column overflow-auto justify-content-start\r
                 justify-content-sm-center align-items-center p-3 p-md-4 min-vh-100 w-100`},e.createElement("div",{className:"shadow-sm rounded bg-white w-100 p-3"},e.createElement("div",{className:"px-3 pt-3 pb-4"},e.createElement(L,{to:"/",className:"logo d-flex mx-auto mb-4 align-items-end justify-content-center"},e.createElement("div",{className:"d-flex",style:{width:"60%"}},e.createElement("img",{src:Xe,alt:"Logomarca ICIA",className:"w-100"})),e.createElement("div",{className:"d-flex pl-3",style:{width:"38%"}},e.createElement("img",{src:Ke,alt:"Logo Computa\xE7\xE3o Ufba",className:"w-100"}))),t)),e.createElement("div",{className:"w-100 mt-2 text-center text-white"},"\xA9 Todos os direitos reservados."))}function Ge(){const t=A(),[a,s]=e.useState(!1),[r,n]=e.useState(!1),[o,l]=e.useState(!1),[i,h]=e.useState({email:"",password:"",showPassword:!1}),{storeUser:p,storeToken:E}=P(),m=y=>x=>{h(U(q({},i),{[y]:x.target.value})),n(!1)},f=()=>{h(U(q({},i),{showPassword:!i.showPassword}))},v=y=>{y.preventDefault()},S=y=>{y.preventDefault(),!!i.email||!!i.email?(l(!0),N.login(i).then(x=>x.data).then(x=>{var c,u;if(x.status==="Success"){const g=(c=x.data)==null?void 0:c.user;p(g),E((u=x.data)==null?void 0:u.token),Ve(x.data),t("/dashboard")}l(!1)}).catch(x=>{l(!1),s(!0),n(!0),h(U(q({},i),{password:""}))})):n(!0)};return e.createElement(H,null,a?e.createElement(Z,{severity:"error"},"Seu e-mail ou senha n\xE3o correspondem aos nossos registros."):null,e.createElement("form",{onSubmit:S,action:"#"},e.createElement(I,{variant:"outlined",error:r,fullWidth:!0,margin:"normal"},e.createElement(F,{htmlFor:"email"},"E-mail"),e.createElement(O,{id:"email",type:"email",value:i.email,onChange:m("email"),label:"E-mail"}),r?e.createElement(j,{id:"e-mail-error-text"},i.email?"E-mail ou senha incorreto.":"Campo obrigat\xF3rio."):null),e.createElement(I,{variant:"outlined",error:r,fullWidth:!0,margin:"normal"},e.createElement(F,{htmlFor:"password"},"Senha"),e.createElement(O,{id:"password",type:i.showPassword?"text":"password",value:i.password,onChange:m("password"),endAdornment:e.createElement(ee,{position:"end"},e.createElement(w,{"aria-label":"toggle password visibility",onClick:f,onMouseDown:v,edge:"end"},i.showPassword?e.createElement(fe,null):e.createElement(ve,null))),label:"Senha"}),r?e.createElement(j,{id:"password-error-text"},i.password?"E-mail ou senha incorreto.":"Campo obrigat\xF3rio."):null),e.createElement("div",{className:"d-flex mb-3 justify-content-end"},e.createElement(L,{to:"/request-password",id:"request-password__button"},"Esqueceu sua senha?")),e.createElement(te,{id:"submitt-button",type:"submit",loading:o,variant:"contained",className:"mb-3",disableElevation:!0,fullWidth:!0},"Entrar")))}function Je(){const[t,a]=e.useState(!1),[s,r]=e.useState(!1),[n,o]=e.useState(!1),[l,i]=e.useState({email:""}),h=E=>m=>{i(U(q({},l),{[E]:m.target.value})),n&&o(!1),s&&r(!1)},p=async E=>{E.preventDefault();const m=l.email;if(m){a(!0);try{const f=await N.requestPassword(m);console.log(f)}catch(f){console.log(f)}a(!1),r(!0)}else o(!0)};return e.createElement(H,null,e.createElement("form",{onSubmit:p,action:"#"},s?e.createElement(Z,{severity:"success"},"Se o e-mail ",e.createElement("b",null,l.email)," estiver cadastrado, voc\xEA receber\xE1 intru\xE7\xF5es para recuperar sua senha."):null,e.createElement(I,{variant:"outlined",error:n,fullWidth:!0,margin:"normal",className:"mb-4"},e.createElement(F,{htmlFor:"email"},"E-mail"),e.createElement(O,{id:"email",type:"email",value:l.email,onChange:h("email"),label:"E-mail"}),n?e.createElement(j,{id:"e-mail-error-text"},"Campo obrigat\xF3rio."):null),e.createElement(te,{id:"submitt-button",type:"submit",loading:t,variant:"contained",className:"mb-3",disableElevation:!0,fullWidth:!0},"Entrar")),e.createElement(L,{to:"/login"},"Fazer login")," em vez disso.")}function Ye(){return e.createElement(H,null,e.createElement("p",null,"request-password works!"))}function Ze({handleSidebarOptionClick:t}){const[a,s]=d.exports.useState(!1);return e.createElement("aside",{className:"d-none d-sm-flex flex-column align-items-center border-right border-info h-100"},e.createElement(K,{title:"Reiniciar",placement:"right"},e.createElement(w,{"aria-label":"home",onClick:()=>t("home")},e.createElement(xe,null))),e.createElement(K,{title:a?"Modo claro":"Modo escuro",placement:"right"},e.createElement(w,{"aria-label":"theme-mode",onClick:()=>{s(!a),t("mode")}},a?e.createElement(be,null):e.createElement(ye,null))))}function et(){const[t,a]=d.exports.useState(null),s=l=>{a(l.currentTarget)},r=()=>{a(null)},n=Boolean(t),o=n?"learn-more-popover":void 0;return e.createElement(e.Fragment,null,e.createElement("h2",{id:"chat-header-title",title:"Intelig\xEAncia Artificial do IC",className:"mb-0 text-dark"},"Intelig\xEAncia Artificial do IC"),e.createElement("div",{className:"flex-fill"}),e.createElement(T,{"aria-describedby":o,variant:"outlined",color:"secondary",onClick:s},"Saiba mais"),e.createElement(Ce,{id:o,open:n,anchorEl:t,onClose:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e.createElement(Q,{sx:{p:2}},'O ICIA \xE9 um sistema de "BOT" com o objetivo de responder as d\xFAvidas relacionadas ao Instituto de Computa\xE7\xE3o (IC) da UFBA, especialmente dos cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o do PGCOMP.',e.createElement("br",null),e.createElement("br",null),"O aplicativo foi desenvolvido por discentes de cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o vinculados ao PGCOMP, sob a orienta\xE7\xE3o do Prof. Dr. Frederico Dur\xE3o, referente a disciplina T\xF3picos em Sistemas de Informa\xE7\xE3o e Web I no semestre letivo de 2022.1.")))}function tt({generateMessegesOnFormSubmit:t}){const[a,s]=e.useState(""),r=()=>o=>{o.preventDefault(),t(a),s("")},n=()=>o=>{s(o.target.value)};return e.createElement("div",{className:"chat-input-container rounded-pill border border-info position-relative overflow-hidden w-100"},e.createElement("form",{onSubmit:r()},e.createElement("input",{type:"text",className:"py-2 pl-4 pr-5 w-100 border-0",onChange:n(),placeholder:"Digite algo",value:a}),e.createElement("div",{className:"position-absolute"},e.createElement(w,{type:"submit","aria-label":"cached",disabled:!a.length},e.createElement(Ne,null)))))}var at="/assets/icon-icia.06ab72ef.svg";function G({items:t,handleItemSelection:a}){const[s,r]=d.exports.useState(),n=l=>{r(l.id),a(l)},o=l=>l.description!==void 0;return e.createElement(e.Fragment,null,t!=null&&t.length?e.createElement("div",{className:"chat-items"},t.map(l=>e.createElement("button",{type:"button",key:l.id,onClick:()=>n(l),title:o(l)?l.description:l.name,className:`chat-item-option d-block rounded-pill bg-info text-dark py-2 px-3 mt-3 border-0${s===l.id?" selected":""}`},e.createElement("span",null,o(l)?l.description:l.name)))):null)}function J({children:t,questions:a,side:s,text:r,topics:n,generateMessegesForTopicSelection:o,generateMessegesForQuestionSelection:l}){const i=E=>{typeof o=="function"&&h(E)&&o(E),typeof l=="function"&&p(E)&&l(E)},h=E=>E.name!==void 0,p=E=>E.description!==void 0;return e.createElement("div",{className:`chat-message d-flex ${s} w-100`},e.createElement("div",{className:"chat-user rounded-circle align-self-end d-flex align-items-center justify-content-center"},s==="left"?e.createElement("img",{src:at,className:"h-auto",alt:"assistente chatbot"}):e.createElement(Se,null,"person")),e.createElement("div",{className:"chat-ballon py-3 px-4"},r!=null&&r.length?e.createElement("h3",{className:"font-weight-normal mb-0"},r.includes("https://")?e.createElement("a",{target:"_blank",className:"text-white",href:r,rel:"noreferrer"},r):r):null,t,e.createElement(G,{items:n,handleItemSelection:i}),a!=null&&a.length?e.createElement("div",{className:"d-block w-100"},e.createElement(G,{items:a,handleItemSelection:i})):null,e.createElement("div",null)))}function nt(){return e.createElement("div",{className:"d-flex align-items-center typing"},e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}))}var st="/assets/logo-icia-horizontal-text-white.dc2df070.svg";function re({children:t}){return e.createElement("div",null,e.createElement("header",{className:"d-flex align-items-center justify-content-start w-100 app-header px-3"},e.createElement("img",{"data-testid":"logo",src:st,className:"app-logo",alt:"logo"}),e.createElement("div",{className:"flex-fill"}),t))}function rt(){const t=d.exports.useRef(null),[a,s]=d.exports.useState(0),[r,n]=d.exports.useState([]),[o,l]=d.exports.useState(!0),[i,h]=d.exports.useState(!1);let p=A();const E=["Agora escolha uma op\xE7\xE3o :)","Escolha mais uma op\xE7\xE3o abaixo.","Quase l\xE1, selecione uma op\xE7\xE3o.","Veja algumas op\xE7\xF5es que encontrei :)"];d.exports.useEffect(()=>{N.getInitialTopicsTree().then(c=>{const u=x(c.data);l(!1),n([...r,{text:a===0?"Ol\xE1, eu sou a Icia. Como posso te ajudar hoje?":"Ok... vamos tentar de novo. Como posso te ajudar hoje?",side:"left",topics:u}])}),a===0&&m()},[a]);const m=()=>{t&&t.current.addEventListener("DOMNodeInserted",c=>{const u=c.currentTarget;u.scroll({top:u.scrollHeight,behavior:"smooth"})})},f=c=>{switch(c){case"home":s(1+a);break;case"mode":h(!i);break;default:alert("N\xE3o implementado!")}},v=async c=>{const u=[...r,{text:c.name,side:"right"}];n(u),l(!0);const W=(await N.getTopicsTreeById(c.id)).data.find(Boolean),ie=x(W.children),me=W.questions;u.push({text:E[Math.floor(Math.random()*E.length)],side:"left",topics:ie,questions:me}),l(!1),n(u)},S=async c=>{const u=[...r,{text:c.description,side:"right"},{text:c.answer,side:"left"}];n(u)},y=async c=>{const u=[...r,{text:c,side:"right"}];n(u),l(!0);try{const g=await N.getTopicsTreeByNlp(c);if(!g.data)throw new Error("no content");g.data[0].description!==void 0&&u.push({text:E[Math.floor(Math.random()*E.length)],side:"left",topics:[],questions:g.data})}catch{u.push({text:"Ohh, n\xE3o... N\xE3o encontrei uma resposta para a sua pergunta.           Tente pesquisar com outro termo ou utilizar as op\xE7\xF5es do menu :(",side:"left"})}l(!1),n(u)},x=c=>c.filter(g=>!!g.name.length).map(g=>({id:g.id,name:g.name}));return e.createElement("div",{className:"chatbot d-block w-100"+(i?" dark":"")},e.createElement("div",{className:"d-block min-vh-100 vh-100 w-100 mx-auto"},e.createElement(re,null,e.createElement(T,{id:"login-button",type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{p("/login")}},"Login")),e.createElement("div",{className:"chat-container d-flex"},e.createElement(Ze,{handleSidebarOptionClick:f}),e.createElement("main",{className:"d-flex flex-column flex-fill"},e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-bottom border-info px-3"},e.createElement(et,null)),e.createElement("div",{ref:t,className:"chat-content d-flex flex-column flex-fill w-100 mw-100 p-3"},r.map((c,u)=>e.createElement(J,{key:u,text:c.text,side:c.side,topics:c.topics,questions:c.questions,generateMessegesForTopicSelection:v,generateMessegesForQuestionSelection:S})),o?e.createElement(J,{side:"left"},e.createElement(nt,null)):null),e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-top border-info px-3"},e.createElement(tt,{generateMessegesOnFormSubmit:y}))))))}const oe=we({palette:{primary:{light:"#72C3E6",main:"#72C3E6",dark:"#72C3E6",contrastText:"#FFF"},secondary:{light:"#F9D055",main:"#F9D055",dark:"#F9D055",contrastText:"#FFF"}},typography:{fontFamily:["IBM Plex Sans","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),ot=[{id:"question-link",icon:t=>e.createElement(ke,{htmlColor:t}),name:"Perguntas",path:"/dashboard/questions",isSelected:!1},{id:"users-link",icon:t=>e.createElement(Te,{htmlColor:t}),name:"Usu\xE1rios",path:"/dashboard/users",isSelected:!1}],lt=()=>e.createElement("nav",{id:"container"},ot.map(t=>{const a=window.location.pathname.includes(t.path);return e.createElement(L,{"data-testid":t.id,to:t.path,key:t.id},e.createElement("div",{className:"menu-option"},e.createElement("i",{className:"menu-icon"},t.icon(a?oe.palette.secondary.main:"")),e.createElement("span",{className:a?"is-selected":""},t.name)))}));function B({children:t}){const{clean:a,user:s}=P(),r=A(),n=$().state,o=n==null?void 0:n.message;return d.exports.useEffect(()=>{o&&(M[o.type](o.text),history.replaceState({message:null},""))},[]),e.createElement("div",{className:"app"},e.createElement(re,null,e.createElement(T,{id:"logout-button",type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{_e(),a(),r("/login",{replace:!0})}},"Sair")),e.createElement("div",{id:"admin-container",className:"d-flex"},e.createElement(lt,null),e.createElement("main",{id:"admin-content"},t)))}const le=({description:t,answer:a,isEdit:s,handleSubmit:r,handleQuestionChange:n,handleAnswerChange:o})=>e.createElement("form",{onSubmit:r,className:"formContainer"},e.createElement(I,{className:"mt-4",variant:"outlined",fullWidth:!0,color:"secondary"},e.createElement(F,{htmlFor:"input-question"},"Pergunta"),e.createElement(O,{id:"input-question",type:"text",placeholder:"Digite a pergunta",value:t,onChange:l=>n(l.target.value),label:"Pergunta"})),e.createElement("div",{className:" mb-2"},e.createElement(I,{className:"mt-4",variant:"outlined",color:"secondary",fullWidth:!0},e.createElement(F,{htmlFor:"input-answer"},"Resposta"),e.createElement(O,{id:"input-answer",type:"text",placeholder:"Digite a resposta",value:a,onChange:l=>o(l.target.value),label:"Resposta"}))),s?e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"EDITAR"):e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"CADASTRAR")),ct=()=>{const t=A(),[a,s]=d.exports.useState(""),[r,n]=d.exports.useState(""),{authToken:o}=P(),{topicId:l,topicName:i}=$().state,h=m=>{n(m)},p=m=>{s(m)},E=m=>{m.preventDefault(),N.createQuestion(o,l,a,r).then(f=>f.data).then(f=>{console.log(f),t("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta adicionada com sucesso!"}}})}).catch(f=>{})};return e.createElement(B,null,e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(w,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{t(-1)}},e.createElement(z,null)),e.createElement("span",{className:"title"},"Cadastrar Pergunta em ",i)),e.createElement(le,{description:a,answer:r,handleSubmit:E,handleAnswerChange:h,handleQuestionChange:p}))},it=()=>{const{id:t,topic_id:a,topicName:s,description:r,answer:n}=$().state,o=A(),[l,i]=d.exports.useState(r),[h,p]=d.exports.useState(n),{authToken:E}=P(),[m,f]=d.exports.useState(!1),{pathname:v}=$(),S=v.includes("edit"),y=u=>{p(u)},x=u=>{i(u)},c=u=>{u.preventDefault(),f(!0),N.editQuestion(t,E,a,l,h).then(g=>g.data).then(g=>{f(!1),o("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta editada com sucesso!"}}})}).catch(g=>{M.error("Ocorreu um erro"),f(!1)})};return e.createElement(B,null,m&&e.createElement(Ae,{variant:"indeterminate"}),e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(w,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{o(-1)}},e.createElement(z,null)),e.createElement("span",{className:"title"},"Editar Pergunta",s)),e.createElement(le,{description:l,answer:h,handleSubmit:c,handleAnswerChange:y,handleQuestionChange:x,isEdit:S}))};function ce({title:t,text:a,isOpen:s,handleClose:r,handleConfirm:n}){return d.exports.createElement("div",null,d.exports.createElement(Ie,{open:s,onClose:r,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},d.exports.createElement(Fe,{className:"modal-box"},d.exports.createElement(Q,{id:"modal-modal-title",variant:"h6",component:"h2"},t),d.exports.createElement(Q,{id:"modal-modal-description",sx:{mt:2}},a),d.exports.createElement("div",{className:"modal-footer"},d.exports.createElement(T,{variant:"contained",color:"warning",onClick:n,"data-testid":"confirm-button"},"Sim"),d.exports.createElement(T,{variant:"outlined",onClick:r,className:"ml-2"},"N\xE3o")))))}function mt({questions:t,removeQuestion:a}){const s=A(),{authToken:r}=P(),[n,o]=e.useState(!1),[l,i]=e.useState(),h=v=>{const{id:S,topic_id:y,description:x,answer:c,parents:u}=v;let g=y;!g&&u&&(g=u[u.length-1].id),s("edit",{state:{id:S,topic_id:g,description:x,answer:c}})},p=v=>{N.deleteQuestion(v,r).then(S=>{S.data.status==="Success"?(a&&a(v),M.success("Pergunta exclu\xEDda com sucesso!")):M.error("Houve um erro ao excluir a pergunta."),m()})},E=v=>{i(v),o(!0)},m=()=>{i(void 0),o(!1)},f=[{field:"description",headerName:"Pergunta",flex:4},{field:"answer",headerName:"Resposta",flex:4},{field:"id",headerName:"A\xE7\xF5es",renderCell:v=>e.createElement(e.Fragment,null,e.createElement(ce,{title:"Excluir Pergunta",text:"Tem certeza que deseja excluir essa pergunta?",isOpen:n&&l===v.row.id,handleClose:m,handleConfirm:()=>p(l)}),e.createElement(w,{"aria-label":"Editar","data-testid":"edit-button",component:"span",onClick:()=>h(v.row)},e.createElement(ae,null)),e.createElement(w,{"data-testid":"delete-button","aria-label":"Deletar",component:"span",onClick:()=>{E(v.row.id)}},e.createElement(ne,null)))}];return e.createElement("div",{style:{height:"80vh",width:"100%"}},e.createElement(Oe,{rows:t,columns:f,pageSize:15,rowsPerPageOptions:[],disableSelectionOnClick:!0}))}function dt(){const[t,a]=d.exports.useState([]),[s,r]=d.exports.useState([]),[n,o]=d.exports.useState([]),[l,i]=d.exports.useState([]),[h,p]=d.exports.useState(""),[E,m]=d.exports.useState(0),f=A(),{authToken:v}=P(),{getTopicsTree:S,getQuestions:y}=N,x=c=>{a(u=>u.filter(g=>g.id!==c))};return d.exports.useEffect(()=>{E===0&&y(v).then(c=>{a(c.data)})},[E]),d.exports.useEffect(()=>{S(v).then(c=>{i(c.data||[]),o(c.data||[])})},[]),e.createElement(B,null,e.createElement("div",{className:"title-container"},e.createElement("h2",{className:"title"},"Perguntas por categoria")),e.createElement("div",{className:"questions-container"},e.createElement("div",{className:"breadcrumb-container"},E!==0?e.createElement("span",null,e.createElement("button",{className:"breadcrumb-item",onClick:()=>{r([]),i(n),p(""),m(0),a([])}},"Inicio")," > "):e.createElement("span",null,"Inicio"),s.map((c,u)=>u!==s.length-1?e.createElement("span",{key:c.id},e.createElement("button",{className:"breadcrumb-item",onClick:()=>{r(g=>g.slice(0,u+1)),i(c.children),p(c.name),m(c.id),a(c.questions)}},c.name)," > "):e.createElement(e.Fragment,null,c.name))),l.map(c=>c.name===""?null:e.createElement("button",{key:c.id,className:"filter-question-button",onClick:()=>{a(c.questions),r(u=>[...u,c]),i(c.children),p(c.name),m(c.id)}},c.name)),e.createElement("div",{className:"mt-3"},h&&e.createElement(e.Fragment,null,e.createElement("h3",null," ",`Perguntas categoria ${h}`),e.createElement("br",null),e.createElement("div",null,e.createElement(T,{variant:"contained","data-testid":"add-question-button",onClick:()=>{f("/dashboard/questions/create",{state:{topicId:E,topicName:h}})}},"ADICIONAR")))),e.createElement("div",{id:"questions-container"},e.createElement(mt,{questions:t,removeQuestion:x}))))}function Y(){const t=A(),{id:a,name:s,email:r}=$().state,[n,o]=e.useState({email:r||"",name:s||"",password:""}),l=h=>p=>{o(U(q({},n),{[h]:p.target.value}))},i=h=>{h.preventDefault(),a?N.editUser(a,n.email,n.name,n.password).then(p=>p.data).then(p=>{console.log(p),t("/dashboard/users",{state:{message:{type:"success",text:"Usu\xE1rio editado com sucesso!"}}})}).catch(p=>{M.error("Houve um erro ao editar usu\xE1rio."),console.log(p)}):N.createUser(n.email,n.name,n.password).then(p=>p.data).then(p=>{console.log(p),t("/dashboard/users",{state:{message:{type:"success",text:"Usu\xE1rio criado com sucesso!"}}})}).catch(p=>{M.error("Houve um erro ao criar usu\xE1rio."),console.log(p)})};return e.createElement(B,null,e.createElement("div",{className:"user-container title-container"},e.createElement(w,{"aria-label":"Voltar",component:"span",onClick:()=>{t("/dashboard/users")}},e.createElement(z,null)),e.createElement("h2",null,a?"Editar Usu\xE1rio":"Cadastrar Usu\xE1rio")),e.createElement("div",{className:"user-container"},e.createElement("form",{onSubmit:i,action:"#"},e.createElement(I,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(F,{htmlFor:"text"},"Nome"),e.createElement(O,{id:"name",type:"text",value:n.name,onChange:l("name"),label:"Nome"})),e.createElement(I,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(F,{htmlFor:"text"},"E-mail"),e.createElement(O,{id:"email",type:"email",value:n.email,onChange:l("email"),label:"E-mail"})),e.createElement(I,{variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(F,{color:"secondary",htmlFor:"text"},"Senha"),e.createElement(O,{id:"password",type:"text",value:n.password,onChange:l("password"),label:"Senha",color:"secondary"})),e.createElement(T,{type:"submit","data-testid":"submit-button",variant:"contained",color:"secondary",disableElevation:!0},"Enviar"))))}function ut(){const t=A(),[a,s]=d.exports.useState([]),[r,n]=d.exports.useState(!1),[o,l]=d.exports.useState(),i=m=>{N.deleteUser(m).then(()=>{M.success("Usu\xE1rio exclu\xEDdo com sucesso!"),E()}).catch(f=>{M.error("Houve um erro ao excluir o usu\xE1rio")})},h=m=>{l(m),n(!0)},p=()=>{l(void 0),n(!1)},E=()=>{N.getUsers().then(m=>{s(m.data)})};return d.exports.useEffect(()=>{E()},[]),e.createElement(B,null,e.createElement("div",{className:"user-container title-container"},e.createElement("h2",null,"Usu\xE1rios Cadastrados"),e.createElement(T,{"data-testid":"add_user-button",variant:"outlined",color:"secondary",onClick:()=>{t("/dashboard/users/create",{state:{id:"",name:"",email:""}})}},"CRIAR NOVO")),e.createElement("div",{className:"user-container",style:{display:"none"}},e.createElement(Me,{id:"search",label:"Pesquisar",InputProps:{startAdornment:e.createElement(ee,{position:"start"},e.createElement(Pe,null))},variant:"standard"})),e.createElement("div",{className:"user-container"},e.createElement(qe,null,e.createElement(Ue,{sx:{minWidth:450},size:"small"},e.createElement(De,null,e.createElement(X,null,e.createElement(D,null,"Nome"),e.createElement(D,null,"Email"),e.createElement(D,{align:"center"},"A\xE7\xF5es"))),e.createElement(Re,null,a.map(m=>e.createElement(X,{key:m.id,sx:{"&:last-child td, &:last-child th":{border:0}}},e.createElement(D,{width:"40%","data-testid":"user-name"},m.name),e.createElement(D,{width:"40%"},m.email),e.createElement(D,{width:"20%",align:"center"},e.createElement(w,{"aria-label":"Editar","data-testid":"edit_user-button",component:"span",onClick:()=>{t("/dashboard/users/edit",{state:{id:m.id,name:m.name,email:m.email}})}},e.createElement(ae,null)),e.createElement(w,{"data-testid":"delete_user-button","aria-label":"Deletar",component:"span",onClick:()=>h(m.id)},e.createElement(ne,null)),e.createElement(ce,{title:"Excluir usu\xE1rio",text:`Tem certeza que deseja excluir o usu\xE1rio ${m.name}?`,isOpen:r&&o==m.id,handleClose:()=>p(),handleConfirm:()=>i(m.id)})))))))))}function pt(){const{user:t,storeToken:a,storeUser:s}=P(),r=d.exports.useMemo(()=>{let n=!!t;if(!t){const o=k();o&&(n=!0,s(o.user),a((o==null?void 0:o.token)||""))}return n},[t]);return e.createElement($e,null,e.createElement(Be,null,r?e.createElement(e.Fragment,null,e.createElement(b,{path:"/dashboard",element:e.createElement(R,{to:"/dashboard/questions"})}),e.createElement(b,{path:"/dashboard/users",element:e.createElement(ut,null)}),e.createElement(b,{path:"/dashboard/users/create",element:e.createElement(Y,null)}),e.createElement(b,{path:"/dashboard/users/edit",element:e.createElement(Y,null)}),e.createElement(b,{path:"/dashboard/questions",element:e.createElement(dt,null)}),e.createElement(b,{path:"/dashboard/questions/create",element:e.createElement(ct,null)}),e.createElement(b,{path:"/dashboard/questions/edit",element:e.createElement(it,null)}),e.createElement(b,{path:"questions",element:e.createElement(R,{to:"/dashboard/questions"})}),e.createElement(b,{path:"users",element:e.createElement(R,{to:"/dashboard/users"})}),e.createElement(b,{path:"dashboard",element:e.createElement(R,{to:"/dashboard/questions"})})):e.createElement(e.Fragment,null,e.createElement(b,{path:"login",element:e.createElement(Ge,null)}),e.createElement(b,{path:"request-password",element:e.createElement(Je,null)}),e.createElement(b,{path:"reset-password",element:e.createElement(Ye,null)})),e.createElement(b,{path:"/",element:e.createElement(rt,null)}),e.createElement(b,{path:"*",element:e.createElement(R,{to:r?"/dashboard":"/",replace:!0})})))}function Et(){return e.createElement(e.Fragment,null,e.createElement(He,null,e.createElement(Le,{theme:oe},e.createElement(je,null),e.createElement(pt,null))))}Qe.render(e.createElement(e.StrictMode,null,e.createElement(Et,null)),document.getElementById("root"));
