var ve=Object.defineProperty,xe=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ye=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ee=(t,a,n)=>a in t?ve(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,$=(t,a)=>{for(var n in a||(a={}))ye.call(a,n)&&ee(t,n,a[n]);if(Z)for(var n of Z(a))Ce.call(a,n)&&ee(t,n,a[n]);return t},U=(t,a)=>xe(t,be(a));import{r as d,R as e,a as Ne,L as W,u as O,A as oe,F as M,I as P,O as q,b as _,c as le,d as F,V as we,e as Se,f as ce,M as te,H as Te,B as ke,g as Ae,h as T,P as Ie,T as K,S as Fe,i as Oe,j as Me,k as Pe,l as qe,m as L,t as I,n as De,o as X,p as ie,q as $e,s as Ue,D as Re,E as de,v as me,w as Le,x as Be,y as je,z as ze,C as Qe,G as ae,J as R,K as He,N as We,Q as Ve,U as N,W as B,X as _e,Y as Ke,Z as Xe}from"./vendor.13a6cd18.js";const Ge=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=n(r);fetch(r.href,l)}};Ge();const ue=d.exports.createContext({}),Je=({children:t})=>{const[a,n]=d.exports.useState(),[s,r]=d.exports.useState(""),l=h=>{n(h)},o=h=>{r(h)},c=()=>{r(""),n(void 0)};return e.createElement(ue.Provider,{value:{user:a,authToken:s,storeUser:l,storeToken:o,clean:c}},t)},D=()=>e.useContext(ue);const Ye={Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:"Bearer "},w=Ne.create({baseURL:"https://virtual-assistent-backend.herokuapp.com/",headers:Ye}),S={getInitialTopicsTree:async()=>w.get("/api/v1/topics"),getTopicsTreeById:async t=>w.get(`/api/v1/topics/${t}`),getTopicsTreeByNlp:async t=>w.post("/api/v1/nlp",{text:t}),login:async t=>w.post("/api/v2/auth/login",t),requestPassword:async t=>w.get(`/api/v2/auth/recoverAccess/${t}`),getTopicsTree:async t=>{var n;let a=t;return a||(a=((n=A())==null?void 0:n.token)||""),w.get("/api/v3/topics",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},createQuestion:async(t,a,n,s)=>{var o;let r=t;r||(r=((o=A())==null?void 0:o.token)||"");const l={topic_id:a,description:n,answer:s};return w.post("/api/v3/questions",l,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${r}`}})},getQuestions:async t=>{var n;let a=t;return a||(a=((n=A())==null?void 0:n.token)||""),w.get("/api/v3/questions",{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${a}`}})},editQuestion:async(t,a,n,s,r)=>{var c;let l=a;l||(l=((c=A())==null?void 0:c.token)||"");const o={id:t,topic_id:n,description:s,answer:r};return w.patch(`/api/v3/questions/${t}`,o,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${l}`}})},deleteQuestion:async(t,a)=>{var s;let n=a;return n||(n=((s=A())==null?void 0:s.token)||""),w.delete(`/api/v3/questions/${t}`,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${n}`}})},getUsers:async()=>{var a;const t={headers:{Authorization:"Bearer "+((a=A())==null?void 0:a.token)}};return w.get("/api/v3/users",t)},createUser:async(t,a,n)=>{var r;const s={headers:{Authorization:"Bearer "+((r=A())==null?void 0:r.token)}};return w.post("/api/v3/users",{email:t,name:a,password:n},s)},editUser:async(t,a)=>{var s;const n={headers:{Authorization:"Bearer "+((s=A())==null?void 0:s.token)}};return w.patch(`/api/v3/users/${t}`,a,n)},deleteUser:async t=>{var n;const a={headers:{Authorization:"Bearer "+((n=A())==null?void 0:n.token)}};return w.delete(`/api/v3/users/${t}`,a)},deleteTopic:async(t,a)=>{var s;let n=a;return n||(n=((s=A())==null?void 0:s.token)||""),w.delete(`/api/v3/topics/${t}`,{headers:{Accept:"application/json, text/plain, */*","X-CSRF-TOKEN":"",Authorization:`Bearer ${n}`}})}},Ze=t=>{window.sessionStorage.setItem("AUTH",JSON.stringify(t))},A=()=>{const t=window.sessionStorage.getItem("AUTH");return t?JSON.parse(t):null},et=()=>{window.sessionStorage.removeItem("AUTH")};var tt="/assets/logo-ic-ufba.d4b7fcf3.png",at="/assets/logo-icia-vertical.dc3a2a24.svg";function G({children:t}){return e.createElement("div",{className:`auth-container d-flex flex-column overflow-auto justify-content-start\r
                 justify-content-sm-center align-items-center p-3 p-md-4 min-vh-100 w-100`},e.createElement("div",{className:"shadow-sm rounded bg-white w-100 p-3"},e.createElement("div",{className:"px-3 pt-3 pb-4"},e.createElement(W,{to:"/",className:"logo d-flex mx-auto mb-4 align-items-end justify-content-center"},e.createElement("div",{className:"d-flex",style:{width:"60%"}},e.createElement("img",{src:at,alt:"Logomarca ICIA",className:"w-100"})),e.createElement("div",{className:"d-flex pl-3",style:{width:"38%"}},e.createElement("img",{src:tt,alt:"Logo Computa\xE7\xE3o Ufba",className:"w-100"}))),t)),e.createElement("div",{className:"w-100 mt-2 text-center text-white"},"\xA9 Todos os direitos reservados."))}function nt(){const t=O(),[a,n]=e.useState(!1),[s,r]=e.useState(!1),[l,o]=e.useState(!1),[c,h]=e.useState({email:"",password:"",showPassword:!1}),{storeUser:v,storeToken:m}=D(),i=y=>b=>{h(U($({},c),{[y]:b.target.value})),r(!1)},E=()=>{h(U($({},c),{showPassword:!c.showPassword}))},f=y=>{y.preventDefault()},k=y=>{y.preventDefault(),!!c.email||!!c.email?(o(!0),S.login(c).then(b=>b.data).then(b=>{var p,u;if(b.status==="Success"){const x=(p=b.data)==null?void 0:p.user;v(x),m((u=b.data)==null?void 0:u.token),Ze(b.data),t("/dashboard")}o(!1)}).catch(b=>{o(!1),n(!0),r(!0),h(U($({},c),{password:""}))})):r(!0)};return e.createElement(G,null,a?e.createElement(oe,{severity:"error"},"Seu e-mail ou senha n\xE3o correspondem aos nossos registros."):null,e.createElement("form",{onSubmit:k,action:"#"},e.createElement(M,{variant:"outlined",error:s,fullWidth:!0,margin:"normal"},e.createElement(P,{htmlFor:"email"},"E-mail"),e.createElement(q,{id:"email",type:"email",value:c.email,onChange:i("email"),label:"E-mail"}),s?e.createElement(_,{id:"e-mail-error-text"},c.email?"E-mail ou senha incorreto.":"Campo obrigat\xF3rio."):null),e.createElement(M,{variant:"outlined",error:s,fullWidth:!0,margin:"normal"},e.createElement(P,{htmlFor:"password"},"Senha"),e.createElement(q,{id:"password",type:c.showPassword?"text":"password",value:c.password,onChange:i("password"),endAdornment:e.createElement(le,{position:"end"},e.createElement(F,{"aria-label":"toggle password visibility",onClick:E,onMouseDown:f,edge:"end"},c.showPassword?e.createElement(we,null):e.createElement(Se,null))),label:"Senha"}),s?e.createElement(_,{id:"password-error-text"},c.password?"E-mail ou senha incorreto.":"Campo obrigat\xF3rio."):null),e.createElement("div",{className:"d-flex mb-3 justify-content-end"},e.createElement(W,{to:"/request-password",id:"request-password__button"},"Esqueceu sua senha?")),e.createElement(ce,{id:"submitt-button",type:"submit",loading:l,variant:"contained",className:"mb-3",disableElevation:!0,fullWidth:!0},"Entrar")))}function st(){const[t,a]=e.useState(!1),[n,s]=e.useState(!1),[r,l]=e.useState(!1),[o,c]=e.useState({email:""}),h=m=>i=>{c(U($({},o),{[m]:i.target.value})),r&&l(!1),n&&s(!1)},v=async m=>{m.preventDefault();const i=o.email;if(i){a(!0);try{const E=await S.requestPassword(i);console.log(E)}catch(E){console.log(E)}a(!1),s(!0)}else l(!0)};return e.createElement(G,null,e.createElement("form",{onSubmit:v,action:"#"},n?e.createElement(oe,{severity:"success"},"Se o e-mail ",e.createElement("b",null,o.email)," estiver cadastrado, voc\xEA receber\xE1 intru\xE7\xF5es para recuperar sua senha."):null,e.createElement(M,{variant:"outlined",error:r,fullWidth:!0,margin:"normal",className:"mb-4"},e.createElement(P,{htmlFor:"email"},"E-mail"),e.createElement(q,{id:"email",type:"email",value:o.email,onChange:h("email"),label:"E-mail"}),r?e.createElement(_,{id:"e-mail-error-text"},"Campo obrigat\xF3rio."):null),e.createElement(ce,{id:"submitt-button",type:"submit",loading:t,variant:"contained",className:"mb-3",disableElevation:!0,fullWidth:!0},"Entrar")),e.createElement(W,{to:"/login"},"Fazer login")," em vez disso.")}function rt(){return e.createElement(G,null,e.createElement("p",null,"request-password works!"))}function ot({handleSidebarOptionClick:t}){const[a,n]=d.exports.useState(!1);return e.createElement("aside",{className:"d-none d-sm-flex flex-column align-items-center border-right border-info h-100"},e.createElement(te,{title:"Reiniciar",placement:"right"},e.createElement(F,{"aria-label":"home",onClick:()=>t("home")},e.createElement(Te,null))),e.createElement(te,{title:a?"Modo claro":"Modo escuro",placement:"right"},e.createElement(F,{"aria-label":"theme-mode",onClick:()=>{n(!a),t("mode")}},a?e.createElement(ke,null):e.createElement(Ae,null))))}function lt(){const[t,a]=d.exports.useState(null),n=o=>{a(o.currentTarget)},s=()=>{a(null)},r=Boolean(t),l=r?"learn-more-popover":void 0;return e.createElement(e.Fragment,null,e.createElement("h2",{id:"chat-header-title",title:"Intelig\xEAncia Artificial do IC",className:"mb-0 text-dark"},"Intelig\xEAncia Artificial do IC"),e.createElement("div",{className:"flex-fill"}),e.createElement(T,{"aria-describedby":l,variant:"outlined",color:"secondary",onClick:n},"Saiba mais"),e.createElement(Ie,{id:l,open:r,anchorEl:t,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e.createElement(K,{sx:{p:2}},'O ICIA \xE9 um sistema de "BOT" com o objetivo de responder as d\xFAvidas relacionadas ao Instituto de Computa\xE7\xE3o (IC) da UFBA, especialmente dos cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o do PGCOMP.',e.createElement("br",null),e.createElement("br",null),"O aplicativo foi desenvolvido por discentes de cursos de gradua\xE7\xE3o e p\xF3s-gradua\xE7\xE3o vinculados ao PGCOMP, sob a orienta\xE7\xE3o do Prof. Dr. Frederico Dur\xE3o, referente a disciplina T\xF3picos em Sistemas de Informa\xE7\xE3o e Web I no semestre letivo de 2022.1.")))}function ct({generateMessegesOnFormSubmit:t}){const[a,n]=e.useState(""),s=()=>l=>{l.preventDefault(),t(a),n("")},r=()=>l=>{n(l.target.value)};return e.createElement("div",{className:"chat-input-container rounded-pill border border-info position-relative overflow-hidden w-100"},e.createElement("form",{onSubmit:s()},e.createElement("input",{type:"text",className:"py-2 pl-4 pr-5 w-100 border-0",onChange:r(),placeholder:"Digite algo",value:a}),e.createElement("div",{className:"position-absolute"},e.createElement(F,{type:"submit","aria-label":"cached",disabled:!a.length},e.createElement(Fe,null)))))}var it="/assets/icon-icia.06ab72ef.svg";function ne({items:t,handleItemSelection:a}){const[n,s]=d.exports.useState(),r=o=>{s(o.id),a(o)},l=o=>o.description!==void 0;return e.createElement(e.Fragment,null,t!=null&&t.length?e.createElement("div",{className:"chat-items"},t.map(o=>e.createElement("button",{type:"button",key:o.id,onClick:()=>r(o),title:l(o)?o.description:o.name,className:`chat-item-option d-block rounded-pill bg-info text-dark py-2 px-3 mt-3 border-0${n===o.id?" selected":""}`},e.createElement("span",null,l(o)?o.description:o.name)))):null)}function se({children:t,questions:a,side:n,text:s,topics:r,generateMessegesForTopicSelection:l,generateMessegesForQuestionSelection:o}){const c=m=>{typeof l=="function"&&h(m)&&l(m),typeof o=="function"&&v(m)&&o(m)},h=m=>m.name!==void 0,v=m=>m.description!==void 0;return e.createElement("div",{className:`chat-message d-flex ${n} w-100`},e.createElement("div",{className:"chat-user rounded-circle align-self-end d-flex align-items-center justify-content-center"},n==="left"?e.createElement("img",{src:it,className:"h-auto",alt:"assistente chatbot"}):e.createElement(Oe,null,"person")),e.createElement("div",{className:"chat-ballon py-3 px-4"},s!=null&&s.length?e.createElement("h3",{className:"font-weight-normal mb-0"},s.includes("https://")?e.createElement("a",{target:"_blank",className:"text-white",href:s,rel:"noreferrer"},s):s):null,t,e.createElement(ne,{items:r,handleItemSelection:c}),a!=null&&a.length?e.createElement("div",{className:"d-block w-100"},e.createElement(ne,{items:a,handleItemSelection:c})):null,e.createElement("div",null)))}function dt(){return e.createElement("div",{className:"d-flex align-items-center typing"},e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}),e.createElement("div",{className:"dot"}))}var mt="/assets/logo-icia-horizontal-text-white.dc2df070.svg";function pe({children:t}){return e.createElement("div",null,e.createElement("header",{className:"d-flex align-items-center justify-content-start w-100 app-header px-3"},e.createElement("img",{"data-testid":"logo",src:mt,className:"app-logo",alt:"logo"}),e.createElement("div",{className:"flex-fill"}),t))}function ut(){const t=d.exports.useRef(null),[a,n]=d.exports.useState(0),[s,r]=d.exports.useState([]),[l,o]=d.exports.useState(!0),[c,h]=d.exports.useState(!1);let v=O();const m=["Agora escolha uma op\xE7\xE3o :)","Escolha mais uma op\xE7\xE3o abaixo.","Quase l\xE1, selecione uma op\xE7\xE3o.","Veja algumas op\xE7\xF5es que encontrei :)"];d.exports.useEffect(()=>{S.getInitialTopicsTree().then(p=>{const u=b(p.data);o(!1),r([...s,{text:a===0?"Ol\xE1, eu sou a Icia. Como posso te ajudar hoje?":"Ok... vamos tentar de novo. Como posso te ajudar hoje?",side:"left",topics:u}])}),a===0&&i()},[a]);const i=()=>{t&&t.current.addEventListener("DOMNodeInserted",p=>{const u=p.currentTarget;u.scroll({top:u.scrollHeight,behavior:"smooth"})})},E=p=>{switch(p){case"home":n(1+a);break;case"mode":h(!c);break;default:alert("N\xE3o implementado!")}},f=async p=>{const u=[...s,{text:p.name,side:"right"}];r(u),o(!0);const z=(await S.getTopicsTreeById(p.id)).data.find(Boolean),Q=b(z.children),H=z.questions;u.push({text:m[Math.floor(Math.random()*m.length)],side:"left",topics:Q,questions:H}),o(!1),r(u)},k=async p=>{const u=[...s,{text:p.description,side:"right"},{text:p.answer,side:"left"}];r(u)},y=async p=>{const u=[...s,{text:p,side:"right"}];r(u),o(!0);try{const x=await S.getTopicsTreeByNlp(p);if(!x.data)throw new Error("no content");x.data[0].description!==void 0&&u.push({text:m[Math.floor(Math.random()*m.length)],side:"left",topics:[],questions:x.data})}catch{u.push({text:"Ohh, n\xE3o... N\xE3o encontrei uma resposta para a sua pergunta.           Tente pesquisar com outro termo ou utilizar as op\xE7\xF5es do menu :(",side:"left"})}o(!1),r(u)},b=p=>p.filter(x=>!!x.name.length).map(x=>({id:x.id,name:x.name}));return e.createElement("div",{className:"chatbot d-block w-100"+(c?" dark":"")},e.createElement("div",{className:"d-block min-vh-100 vh-100 w-100 mx-auto"},e.createElement(pe,null,e.createElement(T,{id:"login-button",type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{v("/login")}},"Login")),e.createElement("div",{className:"chat-container d-flex"},e.createElement(ot,{handleSidebarOptionClick:E}),e.createElement("main",{className:"d-flex flex-column flex-fill"},e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-bottom border-info px-3"},e.createElement(lt,null)),e.createElement("div",{ref:t,className:"chat-content d-flex flex-column flex-fill w-100 mw-100 p-3"},s.map((p,u)=>e.createElement(se,{key:u,text:p.text,side:p.side,topics:p.topics,questions:p.questions,generateMessegesForTopicSelection:f,generateMessegesForQuestionSelection:k})),l?e.createElement(se,{side:"left"},e.createElement(dt,null)):null),e.createElement("div",{className:"chat-toolbar d-flex align-items-center border-top border-info px-3"},e.createElement(ct,{generateMessegesOnFormSubmit:y}))))))}const Ee=Me({palette:{primary:{light:"#72C3E6",main:"#72C3E6",dark:"#72C3E6",contrastText:"#FFF"},secondary:{light:"#F9D055",main:"#F9D055",dark:"#F9D055",contrastText:"#FFF"}},typography:{fontFamily:["IBM Plex Sans","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")}}),pt=[{id:"question-link",icon:t=>e.createElement(Pe,{htmlColor:t}),name:"Perguntas",path:"/dashboard/questions",isSelected:!1},{id:"users-link",icon:t=>e.createElement(qe,{htmlColor:t}),name:"Usu\xE1rios",path:"/dashboard/users",isSelected:!1}],Et=()=>e.createElement("nav",{id:"container"},pt.map(t=>{const a=window.location.pathname.includes(t.path);return e.createElement(W,{"data-testid":t.id,to:t.path,key:t.id},e.createElement("div",{className:"menu-option"},e.createElement("i",{className:"menu-icon"},t.icon(a?Ee.palette.secondary.main:"")),e.createElement("span",{className:a?"is-selected":""},t.name)))}));function j({children:t}){const{clean:a,user:n}=D(),s=O(),r=L().state,l=L().pathname,o=r==null?void 0:r.message;return d.exports.useEffect(()=>{o&&(I[o.type](o.text),history.replaceState({message:null},""))},[]),e.createElement("div",{className:"app"},e.createElement(pe,null,e.createElement(T,{id:"profile-edit",startIcon:e.createElement(De,null),type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{l!=="/dashboard/users/edit"&&l!=="/dashboard/users/create"&&s("/dashboard/users/edit",{state:n})}},n==null?void 0:n.name),e.createElement(T,{id:"logout-button",type:"button",variant:"contained",color:"secondary",disableElevation:!0,onClick:()=>{et(),a(),s("/login",{replace:!0})}},"Sair")),e.createElement("div",{id:"admin-container",className:"d-flex"},e.createElement(Et,null),e.createElement("main",{id:"admin-content"},t)))}const he=({description:t,answer:a,isEdit:n,handleSubmit:s,handleQuestionChange:r,handleAnswerChange:l})=>e.createElement("form",{onSubmit:s,className:"formContainer"},e.createElement(M,{className:"mt-4",variant:"outlined",fullWidth:!0,color:"secondary"},e.createElement(P,{htmlFor:"input-question"},"Pergunta"),e.createElement(q,{id:"input-question",type:"text",placeholder:"Digite a pergunta",value:t,onChange:o=>r(o.target.value),label:"Pergunta"})),e.createElement("div",{className:" mb-2"},e.createElement(M,{className:"mt-4",variant:"outlined",color:"secondary",fullWidth:!0},e.createElement(P,{htmlFor:"input-answer"},"Resposta"),e.createElement(q,{id:"input-answer",type:"text",placeholder:"Digite a resposta",value:a,onChange:o=>l(o.target.value),label:"Resposta"}))),n?e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"EDITAR"):e.createElement(T,{variant:"contained",color:"secondary",type:"submit","data-testid":"submit-button"},"CADASTRAR")),ht=()=>{const t=O(),[a,n]=d.exports.useState(""),[s,r]=d.exports.useState(""),{authToken:l}=D(),{topicId:o,topicName:c}=L().state,h=i=>{r(i)},v=i=>{n(i)},m=i=>{i.preventDefault(),S.createQuestion(l,o,a,s).then(E=>E.data).then(E=>{console.log(E),t("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta adicionada com sucesso!"}}})}).catch(E=>{})};return e.createElement(j,null,e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(F,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{t(-1)}},e.createElement(X,null)),e.createElement("span",{className:"title"},"Cadastrar Pergunta em ",c)),e.createElement(he,{description:a,answer:s,handleSubmit:m,handleAnswerChange:h,handleQuestionChange:v}))},gt=()=>{const{id:t,topic_id:a,topicName:n,description:s,answer:r}=L().state,l=O(),[o,c]=d.exports.useState(s),[h,v]=d.exports.useState(r),{authToken:m}=D(),[i,E]=d.exports.useState(!1),{pathname:f}=L(),k=f.includes("edit"),y=u=>{v(u)},b=u=>{c(u)},p=u=>{u.preventDefault(),E(!0),S.editQuestion(t,m,a,o,h).then(x=>x.data).then(x=>{E(!1),l("/dashboard/questions",{state:{message:{type:"success",text:"Pergunta editada com sucesso!"}}})}).catch(x=>{I.error("Ocorreu um erro"),E(!1)})};return e.createElement(j,null,i&&e.createElement(ie,{variant:"indeterminate"}),e.createElement("div",{className:"d-flex align-items-center mt-2"},e.createElement(F,{className:"mr-3 ml-3","aria-label":"Voltar",component:"span",onClick:()=>{l(-1)}},e.createElement(X,null)),e.createElement("span",{className:"title"},"Editar Pergunta",n)),e.createElement(he,{description:o,answer:h,handleSubmit:p,handleAnswerChange:y,handleQuestionChange:b,isEdit:k}))};function J({title:t,text:a,isOpen:n,handleClose:s,handleConfirm:r}){return d.exports.createElement("div",null,d.exports.createElement($e,{open:n,onClose:s,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description"},d.exports.createElement(Ue,{className:"modal-box"},d.exports.createElement(K,{id:"modal-modal-title",variant:"h6",component:"h2"},t),d.exports.createElement(K,{id:"modal-modal-description",sx:{mt:2}},a),d.exports.createElement("div",{className:"modal-footer"},d.exports.createElement(T,{variant:"contained",color:"warning",onClick:r,"data-testid":"confirm-button"},"Sim"),d.exports.createElement(T,{variant:"outlined",onClick:s,className:"ml-2"},"N\xE3o")))))}function ft({questions:t,removeQuestion:a}){const n=O(),{authToken:s}=D(),[r,l]=e.useState(!1),[o,c]=e.useState(),h=f=>{const{id:k,topic_id:y,description:b,answer:p,parents:u}=f;let x=y;!x&&u&&(x=u[u.length-1].id),n("edit",{state:{id:k,topic_id:x,description:b,answer:p}})},v=f=>{S.deleteQuestion(f,s).then(k=>{k.data.status==="Success"?(a&&a(f),I.success("Pergunta exclu\xEDda com sucesso!")):I.error("Houve um erro ao excluir a pergunta."),i()})},m=f=>{c(f),l(!0)},i=()=>{c(void 0),l(!1)},E=[{field:"description",headerName:"Pergunta",flex:4},{field:"answer",headerName:"Resposta",flex:4},{field:"id",headerName:"A\xE7\xF5es",renderCell:f=>e.createElement(e.Fragment,null,e.createElement(J,{title:"Excluir Pergunta",text:"Tem certeza que deseja excluir essa pergunta?",isOpen:r&&o===f.row.id,handleClose:i,handleConfirm:()=>v(o)}),e.createElement(F,{"aria-label":"Editar","data-testid":"edit-button",component:"span",onClick:()=>h(f.row)},e.createElement(de,null)),e.createElement(F,{"data-testid":"delete-button","aria-label":"Deletar",component:"span",onClick:()=>{m(f.row.id)}},e.createElement(me,null)))}];return e.createElement("div",{style:{height:"80vh",width:"100%"}},e.createElement(Re,{rows:t,columns:E,pageSize:15,rowsPerPageOptions:[],disableSelectionOnClick:!0}))}function vt(){const[t,a]=d.exports.useState([]),[n,s]=d.exports.useState([]),[r,l]=d.exports.useState([]),[o,c]=d.exports.useState([]),[h,v]=d.exports.useState(""),[m,i]=d.exports.useState(0),[E,f]=d.exports.useState(!1),[k,y]=d.exports.useState(!1),b=O(),{authToken:p}=D(),{getTopicsTree:u,getQuestions:x,deleteTopic:z}=S,Q=()=>{f(!1)},H=()=>{s([]),c(r),v(""),i(0),a([])},ge=g=>{y(!0),z(g,p).then(C=>C==null?void 0:C.data).then(C=>{console.log(C),C.status==="Success"?(I.success("Categoria exclu\xEDda com sucesso!"),H(),Y()):(console.log(C),I.error("Aconteceu um erro ao excluir a categoria."))}).catch(C=>{console.log(C),I.error("Aconteceu um erro ao excluir a categoria.")}).finally(()=>{y(!1),Q()})},fe=g=>{a(C=>C.filter(V=>V.id!==g))};d.exports.useEffect(()=>{m===0&&x(p).then(g=>{a(g.data)})},[m]);const Y=e.useCallback(()=>{y(!0),u(p).then(g=>{c(g.data||[]),l(g.data||[])}).finally(()=>y(!1))},[u,c,l]);return d.exports.useEffect(()=>{Y()},[]),e.createElement(j,null,k&&e.createElement(ie,{variant:"indeterminate"}),e.createElement("div",{className:"d-flex justify-content-between align-items-center pr-5"},e.createElement("div",{className:"title-container"},e.createElement("h2",{className:"title"},"Perguntas por categoria")),h&&e.createElement(e.Fragment,null,e.createElement(J,{title:"Excluir Pergunta",text:`Tem certeza que deseja excluir a categoria ${h}?`,isOpen:E,handleClose:Q,handleConfirm:()=>ge(m)}),e.createElement("div",null,e.createElement(T,{variant:"contained",color:"warning","data-testid":"add-question-button",onClick:()=>{f(!0)}},"Excluir")))),e.createElement("div",{className:"questions-container"},e.createElement("div",{className:"breadcrumb-container"},m!==0?e.createElement("span",null,e.createElement("button",{className:"breadcrumb-item",onClick:()=>{H()}},"Inicio")," > "):e.createElement("span",null,"Inicio"),n.map((g,C)=>C!==n.length-1?e.createElement("span",{key:g.id},e.createElement("button",{className:"breadcrumb-item",onClick:()=>{s(V=>V.slice(0,C+1)),c(g.children),v(g.name),i(g.id),a(g.questions)}},g.name)," > "):e.createElement(e.Fragment,null,g.name))),o.map(g=>g.name===""?null:e.createElement("button",{key:g.id,className:"filter-question-button",onClick:()=>{a(g.questions),s(C=>[...C,g]),c(g.children),v(g.name),i(g.id)}},g.name)),e.createElement("div",{className:"mt-3"},h&&e.createElement(e.Fragment,null,e.createElement("h3",null," ",`Perguntas categoria ${h}`),e.createElement("br",null),e.createElement("div",null,e.createElement(T,{variant:"contained","data-testid":"add-question-button",onClick:()=>{b("/dashboard/questions/create",{state:{topicId:m,topicName:h}})}},"ADICIONAR")))),e.createElement("div",{id:"questions-container"},e.createElement(ft,{questions:t,removeQuestion:fe}))))}function re(){const{clean:t,user:a}=D(),n=O(),{id:s,name:r,email:l,password:o}=L().state,[c,h]=e.useState({email:l||"",name:r||"",password:""}),v=i=>E=>{h(U($({},c),{[i]:E.target.value}))},m=i=>{if(i.preventDefault(),s){const E={email:c.email,name:c.name};c.password&&(E.password=c.password),S.editUser(s,E).then(f=>f.data).then(f=>{n("/dashboard/users",{state:{message:{type:"success",text:`${c.name} editado com sucesso!`}}})}).catch(f=>{I.error(`Houve um erro ao editar ${c.name}.`),console.log(f)})}else S.createUser(c.email,c.name,c.password).then(E=>E.data).then(E=>{n("/dashboard/users",{state:{message:{type:"success",text:"Usu\xE1rio criado com sucesso!"}}})}).catch(E=>{I.error("Houve um erro ao criar usu\xE1rio."),console.log(E)})};return e.createElement(j,null,e.createElement("div",{className:"user-container title-container"},e.createElement(F,{"aria-label":"Voltar",component:"span",onClick:()=>{n("/dashboard/users")}},e.createElement(X,null)),e.createElement("h2",null,s?"Editar Usu\xE1rio":"Cadastrar Usu\xE1rio")),e.createElement("div",{className:"user-container"},e.createElement("form",{onSubmit:m,action:"#"},e.createElement(M,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(P,{htmlFor:"text"},"Nome"),e.createElement(q,{id:"name",type:"text",value:c.name,onChange:v("name"),label:"Nome"})),e.createElement(M,{color:"secondary",variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(P,{htmlFor:"text"},"E-mail"),e.createElement(q,{id:"email",type:"email",value:c.email,onChange:v("email"),label:"E-mail"})),e.createElement(M,{variant:"outlined",fullWidth:!0,margin:"normal"},e.createElement(P,{hidden:!!s&&s!==(a==null?void 0:a.id),color:"secondary",htmlFor:"text"},"Senha"),e.createElement(q,{id:"password",hidden:!!s&&s!==(a==null?void 0:a.id),type:"text",value:c.password,onChange:v("password"),label:"Senha",color:"secondary"})),e.createElement(T,{type:"submit","data-testid":"submit-button",variant:"contained",color:"secondary",disableElevation:!0},"Enviar"))))}function xt(){const t=O(),[a,n]=d.exports.useState([]),[s,r]=d.exports.useState(!1),[l,o]=d.exports.useState(),c=i=>{S.deleteUser(i).then(()=>{I.success("Usu\xE1rio exclu\xEDdo com sucesso!"),m()}).catch(E=>{I.error("Houve um erro ao excluir o usu\xE1rio")})},h=i=>{o(i),r(!0)},v=()=>{o(void 0),r(!1)},m=()=>{S.getUsers().then(i=>{n(i.data)})};return d.exports.useEffect(()=>{m()},[]),e.createElement(j,null,e.createElement("div",{className:"user-container title-container"},e.createElement("h2",null,"Usu\xE1rios Cadastrados"),e.createElement(T,{"data-testid":"add_user-button",variant:"outlined",color:"secondary",onClick:()=>{t("/dashboard/users/create",{state:{id:"",name:"",email:""}})}},"CRIAR NOVO")),e.createElement("div",{className:"user-container",style:{display:"none"}},e.createElement(Le,{id:"search",label:"Pesquisar",InputProps:{startAdornment:e.createElement(le,{position:"start"},e.createElement(Be,null))},variant:"standard"})),e.createElement("div",{className:"user-container"},e.createElement(je,null,e.createElement(ze,{sx:{minWidth:450},size:"small"},e.createElement(Qe,null,e.createElement(ae,null,e.createElement(R,null,"Nome"),e.createElement(R,null,"Email"),e.createElement(R,{align:"center"},"A\xE7\xF5es"))),e.createElement(He,null,a.map(i=>e.createElement(ae,{key:i.id,sx:{"&:last-child td, &:last-child th":{border:0}}},e.createElement(R,{width:"40%","data-testid":"user-name"},i.name),e.createElement(R,{width:"40%"},i.email),e.createElement(R,{width:"20%",align:"center"},e.createElement(F,{"aria-label":"Editar","data-testid":"edit_user-button",component:"span",onClick:()=>{t("/dashboard/users/edit",{state:{id:i.id,name:i.name,email:i.email,password:i.password}})}},e.createElement(de,null)),e.createElement(F,{"data-testid":"delete_user-button","aria-label":"Deletar",component:"span",onClick:()=>h(i.id)},e.createElement(me,null)),e.createElement(J,{title:"Excluir usu\xE1rio",text:`Tem certeza que deseja excluir o usu\xE1rio ${i.name}?`,isOpen:s&&l==i.id,handleClose:()=>v(),handleConfirm:()=>c(i.id)})))))))))}function bt(){const{user:t,storeToken:a,storeUser:n}=D(),s=d.exports.useMemo(()=>{let r=!!t;if(!t){const l=A();l&&(r=!0,n(l.user),a((l==null?void 0:l.token)||""))}return r},[t]);return e.createElement(We,null,e.createElement(Ve,null,s?e.createElement(e.Fragment,null,e.createElement(N,{path:"/dashboard",element:e.createElement(B,{to:"/dashboard/questions"})}),e.createElement(N,{path:"/dashboard/users",element:e.createElement(xt,null)}),e.createElement(N,{path:"/dashboard/users/create",element:e.createElement(re,null)}),e.createElement(N,{path:"/dashboard/users/edit",element:e.createElement(re,null)}),e.createElement(N,{path:"/dashboard/questions",element:e.createElement(vt,null)}),e.createElement(N,{path:"/dashboard/questions/create",element:e.createElement(ht,null)}),e.createElement(N,{path:"/dashboard/questions/edit",element:e.createElement(gt,null)}),e.createElement(N,{path:"questions",element:e.createElement(B,{to:"/dashboard/questions"})}),e.createElement(N,{path:"users",element:e.createElement(B,{to:"/dashboard/users"})}),e.createElement(N,{path:"dashboard",element:e.createElement(B,{to:"/dashboard/questions"})})):e.createElement(e.Fragment,null,e.createElement(N,{path:"login",element:e.createElement(nt,null)}),e.createElement(N,{path:"request-password",element:e.createElement(st,null)}),e.createElement(N,{path:"reset-password",element:e.createElement(rt,null)})),e.createElement(N,{path:"/",element:e.createElement(ut,null)}),e.createElement(N,{path:"*",element:e.createElement(B,{to:s?"/dashboard":"/",replace:!0})})))}function yt(){return e.createElement(e.Fragment,null,e.createElement(Je,null,e.createElement(_e,{theme:Ee},e.createElement(Ke,null),e.createElement(bt,null))))}Xe.render(e.createElement(e.StrictMode,null,e.createElement(yt,null)),document.getElementById("root"));
